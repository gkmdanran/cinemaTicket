{"version":3,"sources":[null,"webpack:///C:/Users/kaiming.gu_sx/Desktop/cinemaTicket/components/TemplateA/TemplateA.vue?e087","webpack:///C:/Users/kaiming.gu_sx/Desktop/cinemaTicket/components/TemplateA/TemplateA.vue?6ff1","webpack:///C:/Users/kaiming.gu_sx/Desktop/cinemaTicket/components/TemplateA/TemplateA.vue?c575","uni-app:///components/TemplateA/TemplateA.vue"],"names":["name","props","ticketInfo","type","default","bigImg","mainTitle","subTitle","duration","kinds","releaseTime","cinema","hell","seat","price","dateTime","data","ticketUrl","methods","createImage","uni","quality","canvasId","complete","console","drawText","lineWidth","ctx","initHeight","lastSubStrIndex","drawTemplate","dashYarr","detailArr","txt","x","y","InfoLabelArr","InfoCntArr","mounted"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAsH;AACtH;AAC6D;AACL;;;AAGxD;AACkL;AAClL,gBAAgB,2LAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,oFAAM;AACR,EAAE,6FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,wFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAoqB,CAAgB,yrBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;gBCQxrB;EACAA;EACAC;IACAC;MACAC;MACAC;QACA;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;UACAC;QAEA;MACA;IACA;EACA;EACAC;IACA;MACAC;IACA;EACA;EACAC;IACAC;MAAA;MACAC;QACAC;QACAC;QACAC;UACAC;UACA;YACA;YACA;UACA;QACA;MAEA;IACA;IACAC;MACA;MACA;MACA;QACAC;QACA;UACAC;UACAC;UACAF;UACAG;QACA;QACA;UAAA;UACAF;QACA;MACA;IAEA;IACAG;MAAA;MACA;MACA;MACA;MACA;MACAH;MACAA;MACAA;MACA;MACAA;MACAA;MACAA;MACA;MACA;MACAI;QACAJ;QACAA;QACAA;QACAA;QACAA;QACAA;QACAA;MACA;MACA;MACA;MACA,2BACA,4CACA,2CACA,8CACA;MACAK;QACAL;QACAA;QACAA;MACA;MACA;MACA;MACA;QACAM;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;MACA,EACA;MACAC;QACAT;QACAA;QACAA;MACA;MACA;QACAM;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;MACA,GACA;QACAF;QACAC;QACAC;MACA,EACA;MACAE;QACAV;QACAA;QACA;UACAA;QACA;UACA;QACA;MACA;MACA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACA;MACAA;MACAA;MACAA;MACAA;MACAA;MACA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACAA;MACA;MACAA;MACAA;MACAA;MACAA;MACAA;IACA;EACA;EACAW;IACA;EACA;AACA;AAAA,4B","file":"components/TemplateA/TemplateA.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./TemplateA.vue?vue&type=template&id=a6310958&\"\nvar renderjs\nimport script from \"./TemplateA.vue?vue&type=script&lang=js&\"\nexport * from \"./TemplateA.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/TemplateA/TemplateA.vue\"\nexport default component.exports","export * from \"-!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./TemplateA.vue?vue&type=template&id=a6310958&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./TemplateA.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\GKMruanjian\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./TemplateA.vue?vue&type=script&lang=js&\"","<template>\r\n\t<div class=\"TemplateA\">\r\n\t\t<canvas style=\"width: 300px; height: 850px;margin: 0 auto;background-color: #fff;\" canvas-id=\"TemplateA\"\r\n\t\t\tid=\"TemplateA\"></canvas>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tname: \"TemplateA\",\r\n\t\tprops: {\r\n\t\t\tticketInfo: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: function() {\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tbigImg: '/static/lldq.jpg',\r\n\t\t\t\t\t\tmainTitle: '流浪地球2',\r\n\t\t\t\t\t\tsubTitle: 'The Wandering Earth II',\r\n\t\t\t\t\t\tduration: 147,\r\n\t\t\t\t\t\tkinds: ['科幻', '冒险', '灾难'],\r\n\t\t\t\t\t\treleaseTime: '2023-01-22',\r\n\t\t\t\t\t\tcinema: '幸福蓝海国际影城绿宝店',\r\n\t\t\t\t\t\thell: '6号-口味王厅',\r\n\t\t\t\t\t\tseat: '5排9座',\r\n\t\t\t\t\t\tprice: 52,\r\n\t\t\t\t\t\tdateTime: '2022-12-11',\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tticketUrl: '',\r\n\t\t\t};\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tcreateImage() {\r\n\t\t\t\tuni.canvasToTempFilePath({\r\n\t\t\t\t\tquality: 1,\r\n\t\t\t\t\tcanvasId: 'TemplateA',\r\n\t\t\t\t\tcomplete: (res) => {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif (res.tempFilePath) {\r\n\t\t\t\t\t\t\tthis.ticketUrl = res.tempFilePath.replace(/[\\r\\n]/g, '');\r\n\t\t\t\t\t\t\tthis.$emit('getUrl', this.ticketUrl)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t}, this)\r\n\t\t\t},\r\n\t\t\tdrawText(ctx, str, leftWidth, initHeight, canvasWidth) {\r\n\t\t\t\tlet lineWidth = 0;\r\n\t\t\t\tlet lastSubStrIndex = 0; //每次开始截取的字符串的索引\r\n\t\t\t\tfor (let i = 0; i < str.length; i++) {\r\n\t\t\t\t\tlineWidth += ctx.measureText(str[i]).width;\r\n\t\t\t\t\tif (lineWidth > canvasWidth) {\r\n\t\t\t\t\t\tctx.fillText(str.substring(lastSubStrIndex, i), leftWidth, initHeight); //绘制截取部分\r\n\t\t\t\t\t\tinitHeight += 16; //22为 文字大小20 + 2\r\n\t\t\t\t\t\tlineWidth = 0;\r\n\t\t\t\t\t\tlastSubStrIndex = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (i == str.length - 1) { //绘制剩余部分\r\n\t\t\t\t\t\tctx.fillText(str.substring(lastSubStrIndex, i + 1), leftWidth, initHeight);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tdrawTemplate() {\r\n\t\t\t\tconst width = 300\r\n\t\t\t\tconst leftOffset = 10\r\n\t\t\t\tconst rightOffset = width - leftOffset\r\n\t\t\t\tconst ctx = uni.createCanvasContext('TemplateA', this);\r\n\t\t\t\tctx.setFillStyle('#f1f1f1')\r\n\t\t\t\tctx.fillRect(0, 0, width, 420);\r\n\t\t\t\tctx.drawImage(this.ticketInfo.bigImg, 0, 0, 300, 420)\r\n\t\t\t\t//副标题\r\n\t\t\t\tctx.setFontSize(12)\r\n\t\t\t\tctx.setFillStyle('#191919')\r\n\t\t\t\tctx.fillText(this.ticketInfo.subTitle, leftOffset, 470);\r\n\t\t\t\t//虚线\r\n\t\t\t\tconst dashYarr = [480, 552]\r\n\t\t\t\tdashYarr.forEach(item => {\r\n\t\t\t\t\tctx.setLineDash([8, 6], 4);\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(leftOffset, item);\r\n\t\t\t\t\tctx.lineTo(rightOffset, item);\r\n\t\t\t\t\tctx.setLineWidth(2)\r\n\t\t\t\t\tctx.setStrokeStyle('#7d7e7b')\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t})\r\n\t\t\t\t//详情\r\n\t\t\t\tconst detailH = 20\r\n\t\t\t\tconst detailArr = [\r\n\t\t\t\t\t`${this.ticketInfo.duration} 分钟`,\r\n\t\t\t\t\tthis.ticketInfo.kinds.join('/'),\r\n\t\t\t\t\t`${this.ticketInfo.releaseTime} 上映`\r\n\t\t\t\t]\r\n\t\t\t\tdetailArr.forEach((item, index) => {\r\n\t\t\t\t\tctx.setFontSize(12)\r\n\t\t\t\t\tctx.setFillStyle('#4d4d4d')\r\n\t\t\t\t\tctx.fillText(item, leftOffset, 500 + index * detailH);\r\n\t\t\t\t})\r\n\t\t\t\t//票信息\r\n\t\t\t\tconst infoWidth = (width - 2 * leftOffset) / 3\r\n\t\t\t\tconst InfoLabelArr = [{\r\n\t\t\t\t\t\ttxt: 'CINEMA/影院:',\r\n\t\t\t\t\t\tx: leftOffset,\r\n\t\t\t\t\t\ty: 580\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttxt: 'HELL/影厅:',\r\n\t\t\t\t\t\tx: leftOffset,\r\n\t\t\t\t\t\ty: 630\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttxt: 'SEAT/座位:',\r\n\t\t\t\t\t\tx: leftOffset + infoWidth,\r\n\t\t\t\t\t\ty: 630\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttxt: 'PRICE/票价:',\r\n\t\t\t\t\t\tx: leftOffset + infoWidth * 2,\r\n\t\t\t\t\t\ty: 630\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttxt: 'DATE/日期:',\r\n\t\t\t\t\t\tx: leftOffset,\r\n\t\t\t\t\t\ty: 690\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttxt: 'TIME/时间:',\r\n\t\t\t\t\t\tx: leftOffset + infoWidth,\r\n\t\t\t\t\t\ty: 690\r\n\t\t\t\t\t},\r\n\t\t\t\t]\r\n\t\t\t\tInfoLabelArr.forEach(item => {\r\n\t\t\t\t\tctx.setFontSize(13)\r\n\t\t\t\t\tctx.setFillStyle('#928d89')\r\n\t\t\t\t\tctx.fillText(item.txt, item.x, item.y);\r\n\t\t\t\t})\r\n\t\t\t\tconst InfoCntArr = [{\r\n\t\t\t\t\t\ttxt: this.ticketInfo.cinema,\r\n\t\t\t\t\t\tx: leftOffset,\r\n\t\t\t\t\t\ty: 600\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttxt: this.ticketInfo.hell,\r\n\t\t\t\t\t\tx: leftOffset,\r\n\t\t\t\t\t\ty: 650\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttxt: this.ticketInfo.seat,\r\n\t\t\t\t\t\tx: leftOffset + infoWidth,\r\n\t\t\t\t\t\ty: 650\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttxt: `￥ ${this.ticketInfo.price}`,\r\n\t\t\t\t\t\tx: leftOffset + infoWidth * 2,\r\n\t\t\t\t\t\ty: 650\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttxt: this.ticketInfo.dateTime.split(' ')[0],\r\n\t\t\t\t\t\tx: leftOffset,\r\n\t\t\t\t\t\ty: 710\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttxt: this.ticketInfo.dateTime.split(' ')[1],\r\n\t\t\t\t\t\tx: leftOffset + infoWidth,\r\n\t\t\t\t\t\ty: 710\r\n\t\t\t\t\t},\r\n\t\t\t\t]\r\n\t\t\t\tInfoCntArr.forEach((item, index) => {\r\n\t\t\t\t\tctx.setFontSize(12)\r\n\t\t\t\t\tctx.setFillStyle('#928d89')\r\n\t\t\t\t\tif (index === 0) {\r\n\t\t\t\t\t\tctx.fillText(item.txt, item.x, item.y)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.drawText(ctx, item.txt, item.x, item.y, infoWidth - 5)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t//虚线\r\n\t\t\t\tctx.setLineDash([10, 5], 5);\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(0, 750);\r\n\t\t\t\tctx.lineTo(width, 750);\r\n\t\t\t\tctx.setLineWidth(3)\r\n\t\t\t\tctx.setStrokeStyle('#000000')\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\t//打孔点\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.arc(0, 750, 8, 0, 360, false);\r\n\t\t\t\tctx.arc(width, 750, 8, 0, 360, false);\r\n\t\t\t\tctx.setFillStyle('#000000')\r\n\t\t\t\tctx.fill();\r\n\t\t\t\t//底部虚线\r\n\t\t\t\tctx.setLineDash([10, 5], 5);\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\tctx.moveTo(0, 850);\r\n\t\t\t\tctx.lineTo(width, 850);\r\n\t\t\t\tctx.setStrokeStyle('#7d7e7b')\r\n\t\t\t\tctx.stroke();\r\n\t\t\t\t//thank\r\n\t\t\t\tctx.setFontSize(14)\r\n\t\t\t\tctx.setTextAlign('center')\r\n\t\t\t\tctx.setFillStyle('#000000')\r\n\t\t\t\tctx.fillText(`${this.ticketInfo.dateTime.split(' ')[0]} 观影留念`, 150, 810);\r\n\t\t\t\tctx.font = 'normal bold 16px Arial,sans-serif '\r\n\t\t\t\tctx.setFillStyle('#000000')\r\n\t\t\t\tctx.fillText('THANK YOU FOR WATCHING', 150, 780);\r\n\t\t\t\t//主标题\r\n\t\t\t\tctx.setTextAlign('left')\r\n\t\t\t\tctx.setFontSize(16)\r\n\t\t\t\tctx.setFillStyle('#000000')\r\n\t\t\t\tctx.fillText(this.ticketInfo.mainTitle, leftOffset, 450);\r\n\t\t\t\tctx.draw()\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.drawTemplate()\r\n\t\t}\r\n\t}\r\n</script>\n"],"sourceRoot":""}