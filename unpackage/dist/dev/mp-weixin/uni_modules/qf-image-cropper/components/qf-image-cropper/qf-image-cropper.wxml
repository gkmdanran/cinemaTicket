<wxs src="./qf-image-cropper.wxs" module="cropper"></wxs>
<view class="image-cropper" bindwheel="{{cropper.mousewheel}}"><block wx:if="{{use2d}}"><canvas class="img-canvas" style="{{'width:'+(canvansWidth+'px')+';'+('height:'+(canvansHeight+'px')+';')}}" type="2d" id="imgCanvas"></canvas></block><block wx:else><canvas class="img-canvas" style="{{'width:'+(canvansWidth+'px')+';'+('height:'+(canvansHeight+'px')+';')}}" id="imgCanvas" canvas-id="imgCanvas"></canvas></block><view class="pic-preview" change:init="{{cropper.initObserver}}" init="{{initData}}" bindtouchstart="{{cropper.touchstart}}" bindtouchmove="{{cropper.touchmove}}" bindtouchend="{{cropper.touchend}}"><block wx:if="{{imgSrc}}"><image class="crop-image" style="{{(cropper.imageStyles)}}" src="{{imgSrc}}" webp="{{true}}"></image></block><block wx:for="{{maskList}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="crop-mask-block" style="{{(cropper.maskStylesList[index])}}"></view></block><block wx:if="{{showBorder}}"><view class="crop-border" style="{{(cropper.borderStyles)}}"></view></block><block wx:if="{{radius>0}}"><view class="crop-circle-box" style="{{(cropper.circleBoxStyles)}}"><view class="crop-circle" style="{{(cropper.circleStyles)}}"></view></view></block><block wx:if="{{showGrid}}"><block><block wx:for="{{gridList}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="crop-grid" style="{{(cropper.gridStylesList[index])}}"></view></block></block></block><block wx:if="{{showAngle}}"><block><block wx:for="{{angleList}}" wx:for-item="item" wx:for-index="index" wx:key="id"><view class="crop-angle" style="{{(cropper.angleStylesList[index])}}"><view style="{{'width:'+(angleSize+'px')+';'+('height:'+(angleSize+'px')+';')}}"></view></view></block></block></block></view><view class="fixed-bottom safe-area-inset-bottom"><block wx:if="{{rotatable&&!!imgSrc}}"><view class="rotate-icon" bindtap="{{cropper.rotateImage}}"></view></block><block wx:if="{{!choosable}}"><view data-event-opts="{{[['tap',[['cropClick',['$event']]]]]}}" class="choose-btn" bindtap="__e">确定</view></block><block wx:else><block wx:if="{{!!imgSrc}}"><block><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="rechoose" bindtap="__e">重选</view><button class="button" size="mini" data-event-opts="{{[['tap',[['cropClick',['$event']]]]]}}" bindtap="__e">确定</button></block></block><block wx:else><view data-event-opts="{{[['tap',[['chooseImage',['$event']]]]]}}" class="choose-btn" bindtap="__e">选择图片</view></block></block></view></view>